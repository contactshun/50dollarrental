<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>50DollarRental — Affordable. Reliable. Anytime.</title>
  <meta name="description" content="50DollarRental — Book reliable cars for just $50/day." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body{font-family:Inter,system-ui;background:#f5f9fc;color:#0f172a;margin:0}
    a{color:#0077ff;text-decoration:none}
    header{position:sticky;top:0;background:#fff;border-bottom:1px solid #ddd;padding:10px 20px;z-index:100}
    .nav{max-width:1080px;margin:auto;display:flex;justify-content:space-between;align-items:center}
    .logo{background:#0077ff;color:#fff;padding:8px 12px;border-radius:8px;font-weight:700}
    main{max-width:1080px;margin:auto;padding:20px}
    .card{background:#fff;padding:20px;margin-bottom:20px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.05)}
    input,select,textarea{width:100%;padding:10px;margin:5px 0;border:1px solid #ccc;border-radius:8px}
    button{background:#0077ff;color:#fff;border:none;padding:10px 16px;border-radius:8px;cursor:pointer;font-weight:600}
    table{width:100%;border-collapse:collapse;margin-top:10px}
    th,td{padding:8px;border-bottom:1px solid #e5e7eb;text-align:left}
    footer{text-align:center;color:#64748b;font-size:13px;padding:20px}
  </style>
</head>
<body>
  <header>
    <div class="nav">
      <div class="logo">$50</div>
      <nav>
        <a href="#/">Home</a> |
        <a href="#/book">Book</a> |
        <a href="#/admin">Admin</a>
      </nav>
    </div>
  </header>

  <main id="app"></main>
  <footer>© 2025 50DollarRental — Data synced with Google Sheets</footer>

  <script>
    const SHEET_WEBAPP_URL = "https://script.google.com/macros/s/AKfycbzrir5A-UvorazXwSn-NnDpkl7I9l_fwrdgeNEPpUkqnG8zz-2tKldL58BzEdMuXFFo/exec";

    const routes = { '/': Home, '/book': Book, '/admin': Admin };
    window.addEventListener('hashchange', navigate);
    window.addEventListener('load', navigate);

    function navigate(){
      const path = location.hash.slice(1) || '/';
      const view = routes[path] || Home;
      document.getElementById('app').innerHTML = '';
      document.getElementById('app').appendChild(view());
    }

    function Home(){
      const el=document.createElement('div');
      el.className='card';
      el.innerHTML=`<h2>Welcome to 50DollarRental</h2>
      <p>Book reliable cars for just <b>$50/day</b>. Transparent pricing, modern cars, and quick service!</p>
      <p><a href="#/book"><button>Book Now</button></a></p>`;
      return el;
    }

    function Book(){
      const el=document.createElement('div');
      el.className='card';
      el.innerHTML=`<h2>Book a Car</h2>
      <form id="form">
        <label>Full Name</label><input id="name" required>
        <label>Phone (WhatsApp)</label><input id="phone" required>
        <label>Car</label>
        <select id="car"><option value="Mazda CX-5">Mazda CX-5</option><option value="Toyota Prius">Toyota Prius</option><option value="Honda Civic">Honda Civic</option></select>
        <label>Pick-up Date & Time</label><input type="datetime-local" id="dateFrom" required>
        <label>Drop-off Date & Time</label><input type="datetime-local" id="dateTo" required>
        <label>Pick-up Location</label><input id="pickup">
        <label>Notes</label><textarea id="notes"></textarea>
        <button type="submit">Submit Booking</button>
      </form>`;
      
      setTimeout(()=>{
        document.getElementById('form').addEventListener('submit', async e=>{
          e.preventDefault();
          const data={
            id:'BKG-'+Math.random().toString(36).slice(2,8).toUpperCase(),
            name:name.value.trim(),
            phone:phone.value.trim(),
            carName:car.value,
            dateFrom:dateFrom.value,
            dateTo:dateTo.value,
            pickup:pickup.value,
            notes:notes.value,
            status:'Pending'
          };
          const res=await fetch(SHEET_WEBAPP_URL,{
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify(data)
          });
          const text=await res.text();
          alert(text==='OK'?'✅ Booking saved to Google Sheets!':'❌ Something went wrong: '+text);
          location.hash='#/admin';
        });
      },0);
      return el;
    }

    function Admin(){
      const el=document.createElement('div');
      el.className='card';
      el.innerHTML=`<h2>Admin — Live Bookings</h2>
      <table><thead><tr><th>Timestamp</th><th>Name</th><th>Phone</th><th>Car</th><th>From</th><th>To</th><th>Status</th></tr></thead>
      <tbody id="rows"><tr><td colspan="7">Loading...</td></tr></tbody></table>`;
      
      setTimeout(()=>{
        fetch(SHEET_WEBAPP_URL)
          .then(r=>r.json())
          .then(data=>{
            const rows=document.getElementById('rows');
            if(!Array.isArray(data)||!data.length){
              rows.innerHTML='<tr><td colspan=7>No data found</td></tr>';return;
            }
            rows.innerHTML=data.map(r=>`
              <tr>
                <td>${r.Timestamp||''}</td>
                <td>${r.Name||''}</td>
                <td>${r.Phone||''}</td>
                <td>${r.Car||''||r.carName||''}</td>
                <td>${r.From||r.dateFrom||''}</td>
                <td>${r.To||r.dateTo||''}</td>
                <td>${r.Status||r.status||''}</td>
              </tr>`).join('');
          })
          .catch(err=>{
            document.getElementById('rows').innerHTML='<tr><td colspan=7>Error: '+err+'</td></tr>';
          });
      },0);
      return el;
    }
  </script>
</body>
</html>
